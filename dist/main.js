(()=>{"use strict";const e=e=>{let t=document.querySelector("#add-project-div"),d=document.querySelector("#add-task-div");"add-project"===e.target.id?d.classList.contains("hidden")&&(()=>{let e=document.querySelector("#add-project-div");document.querySelectorAll(".project-input").forEach((e=>{e.value=""})),e.classList.remove("hidden")})():"add-task"===e.target.id&&t.classList.contains("hidden")&&(()=>{let e=document.querySelector("#add-task-div");document.querySelectorAll(".task-input").forEach((e=>{e.value=""})),e.classList.remove("hidden")})()},t=e=>{e.target.parentElement.parentElement.parentElement.classList.add("hidden")},d=e=>{let t=JSON.parse(localStorage.getItem("project-list")),d=Number(e.target.parentElement.getAttribute("data-key"));t=t.filter((e=>d!==e.id)),n("project-list",JSON.stringify(t))},a=e=>{let t=JSON.parse(localStorage.getItem("project-list")).filter((t=>t.id===Number(e)))[0];console.log(t),i(t)},r=e=>{let t=document.querySelector("#project-name").getAttribute("data-key"),d=e.target.parentElement.getAttribute("data-key"),r=JSON.parse(localStorage.getItem("project-list")),i=r.filter((e=>e.id===Number(t)))[0];i.tasks=i.tasks.filter((e=>e.id!==Number(d))),n("project-list",JSON.stringify(r)),a(Number(t))},i=({id:e,project:t,desc:d,tasks:a})=>{let i=document.querySelector("#project-name"),l=document.querySelector("#project-desc"),s=document.querySelector("#task-list");i.setAttribute("data-key",e),i.innerHTML=t,l.innerHTML=d,s.innerHTML="",a.forEach((e=>{let t=document.createElement("article"),d=document.createElement("div"),a=document.createElement("div"),i=document.createElement("button"),l=document.createElement("p"),c=document.createElement("p"),n=document.createElement("p"),o=document.createElement("p");l.innerHTML=e.title,c.innerHTML=e.description,n.innerHTML=e.date,o.innerHTML=e.priority,i.innerHTML="X",t.classList.add("task"),t.setAttribute("data-key",e.id),l.classList.add("task-title"),c.classList.add("task-desc"),n.classList.add("due-date"),o.classList.add("priority"),d.classList.add("task-info"),a.classList.add("task-priority"),i.classList.add("btn-remove"),i.classList.add("btn-task"),i.classList.add("btn"),i.addEventListener("click",r),"high"===e.priority?o.classList.add("pr-high"):"medium"===e.priority?o.classList.add("pr-medium"):o.classList.add("pr-low"),d.appendChild(l),d.appendChild(c),a.appendChild(n),a.appendChild(o),t.appendChild(d),t.appendChild(a),t.appendChild(i),s.appendChild(t)}))},l=e=>{let t=document.querySelector("#edit-button"),d=document.querySelector("#add-task");if(null!==e.target.getAttribute("data-key")&&void 0!==e.target.getAttribute("data-key"))if("all"===e.target.getAttribute("data-key"))t.classList.add("hidden"),d.classList.add("hidden"),i({id:"all",project:"All Tasks",desc:"All tasks are listed here",tasks:[]});else{let a=[...JSON.parse(localStorage.getItem("project-list"))].filter((t=>Number(e.target.getAttribute("data-key"))===t.id))[0];i(a),t.classList.contains("hidden")&&t.classList.remove("hidden"),d.classList.contains("hidden")&&d.classList.remove("hidden")}},s=()=>{let e=document.querySelector("#task-list"),t=JSON.parse(localStorage.getItem("project-list")),d=[];t.forEach((e=>{let t=e.tasks;for(let e of t)d.push(e)})),d.forEach((t=>{let d=document.createElement("article"),a=document.createElement("div"),r=document.createElement("div"),i=document.createElement("button"),l=document.createElement("p"),s=document.createElement("p"),c=document.createElement("p"),n=document.createElement("p");l.innerHTML=t.title,s.innerHTML=t.description,c.innerHTML=t.date,n.innerHTML=t.priority,i.innerHTML="X",d.classList.add("task"),l.classList.add("task-title"),s.classList.add("task-desc"),c.classList.add("due-date"),n.classList.add("priority"),a.classList.add("task-info"),r.classList.add("task-priority"),i.classList.add("btn-remove"),i.classList.add("btn-task"),i.classList.add("btn"),i.style.visibility="hidden","high"===t.priority?n.classList.add("pr-high"):"medium"===t.priority?n.classList.add("pr-medium"):n.classList.add("pr-low"),a.appendChild(l),a.appendChild(s),r.appendChild(c),r.appendChild(n),d.appendChild(a),d.appendChild(r),d.appendChild(i),e.appendChild(d)}))},c=()=>{let e=JSON.parse(localStorage.getItem("project-list"));null!==e&&(e=>{let t=document.querySelector("#project-nav");t.innerHTML="";let a=document.createElement("li");a.classList.add("project-item"),a.setAttribute("data-key","all"),a.addEventListener("click",l),a.addEventListener("click",s);let r=document.createTextNode("All");a.appendChild(r),t.appendChild(a),e.forEach((e=>{let a=document.createElement("li");a.classList.add("project-item"),a.setAttribute("data-key",e.id),a.addEventListener("click",l);let r=document.createTextNode(e.project),i=document.createElement("button"),s=document.createTextNode("X");i.classList.add("btn"),i.classList.add("btn-project"),i.classList.add("btn-remove"),i.appendChild(s),i.addEventListener("click",d),a.appendChild(r),a.appendChild(i),t.appendChild(a)}))})(e)},n=(e,t)=>{localStorage.setItem(e,t),c()};let o=document.querySelector("#add-project"),u=document.querySelector("#proj-div-close"),p=document.querySelector("#add-task"),m=document.querySelector("#task-div-close"),L=document.querySelector("#add-project-form"),y=document.querySelector("#add-task-form");o.addEventListener("click",e),u.addEventListener("click",t),p.addEventListener("click",e),m.addEventListener("click",t),L.addEventListener("submit",(e=>{e.preventDefault();let t=document.querySelector("#project-input-field"),d=document.querySelector("#project-desc-field"),a={id:Date.now(),project:t.value,desc:d.value,tasks:[]},r=JSON.parse(localStorage.getItem("project-list"));null===r&&(r=[]),r.push(a),n("project-list",JSON.stringify(r)),t.value="",d.value=""})),y.addEventListener("submit",(e=>{e.preventDefault();let t=document.querySelector("#project-name").getAttribute("data-key"),d=document.querySelector("#task-title"),r=document.querySelector("#task-description"),i=document.querySelector("#task-date"),l=document.querySelector("#priority"),s=JSON.parse(localStorage.getItem("project-list")),c={id:Date.now(),title:d.value,description:r.value,date:i.value,priority:l.value};for(let e of s)e.id===Number(t)&&e.tasks.push(c);n("project-list",JSON.stringify(s)),d.value="",r.value="",i.value="",l.value="",a(t)})),c(),s()})();